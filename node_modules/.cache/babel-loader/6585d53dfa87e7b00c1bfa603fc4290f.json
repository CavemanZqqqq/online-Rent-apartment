{"ast":null,"code":"const express = require('express');\n\nconst {\n  Random\n} = require('Mockjs');\n\nconst router = express.Router();\n\nvar Mock = require('Mockjs');\n\nconst {\n  v4\n} = require('uuid');\n\nconst citys = require('./data/hotcity.json'); //测试接口\n\n\nrouter.get('/', (req, res) => {\n  res.send('测试成功');\n}); //测试\n\nrouter.get('/mock', (req, res) => {\n  const data = Mock.mock({\n    'list|10': [{\n      'id|+1': 1,\n      'title': '@cword(3,8)',\n      'huxing|1': ['一室一厅', '三室两厅', '两室一厅']\n    }]\n  });\n  res.send(data);\n}); //获取首页轮播图\n\nrouter.get('/banner', (req, res) => {\n  const data = Mock.mock({\n    status: 200,\n    'banner|3': [{\n      'id|+1': 1,\n      'imgUrl|+1': ['http://iwenwiki.com/api/livable/banner/banner1.png', 'http://iwenwiki.com/api/livable/banner/banner2.png', 'http://iwenwiki.com/api/livable/banner/banner3.png']\n    }]\n  });\n  res.send(data);\n}); //热门房源接口\n//参数：{city: '北京'}\n\nrouter.get('/hothouse', (req, res) => {\n  let city = req.query.city || '北京';\n  res.send(Mock.mock({\n    status: 200,\n    'list|5': [{\n      'id|+1': 1,\n      address: city + '-@cword(3,8)',\n      'huxing|1': ['一室一厅', '两室一厅', '三室两厅', '四室一厅'],\n      'type|1': ['整租', '合租'],\n      'price|2000-10000': 1,\n      'imgUrl|+1': [\"http://iwenwiki.com/api/livable/search/1.jpg\", \"http://iwenwiki.com/api/livable/search/2.JPG\", \"http://iwenwiki.com/api/livable/search/3.jpg\", \"http://iwenwiki.com/api/livable/search/4.JPG\", \"http://iwenwiki.com/api/livable/search/5.jpg\"],\n      'area|50-120.2': 1\n    }]\n  }));\n}); //请求热门城市\n\nrouter.get('/selectcity', (req, res) => {\n  res.send({\n    status: 200,\n    data: citys\n  });\n}); //请求搜素列表\n\nrouter.get('/search', (req, res) => {\n  let {\n    city,\n    val,\n    page\n  } = req.query;\n  res.send(Mock.mock({\n    status: 200,\n    success: true,\n    nextPage: page + 1,\n    'list|10': [{\n      'imgUrl|1': [\"http://iwenwiki.com/api/livable/search/1.jpg\", \"http://iwenwiki.com/api/livable/search/2.JPG\", \"http://iwenwiki.com/api/livable/search/3.jpg\", \"http://iwenwiki.com/api/livable/search/4.JPG\", \"http://iwenwiki.com/api/livable/search/5.jpg\", \"http://iwenwiki.com/api/livable/search/6.jpg\", \"http://iwenwiki.com/api/livable/search/6.jpg\", \"http://iwenwiki.com/api/livable/search/6.jpg\", \"http://iwenwiki.com/api/livable/search/6.jpg\", \"http://iwenwiki.com/api/livable/search/6.jpg\"],\n      id: function () {\n        return v4();\n      },\n      title: city + val + '- @cword(5,8)',\n      // 房源信息\n      'total|6-30': 1,\n      //总楼层\n      'current|1-30': 1,\n      //当前楼层\n      floor: function () {\n        if (this.total >= this.current) {\n          return `${this.current}/${this.total}`;\n        } else {\n          return `${this.total}/${this.current}`;\n        }\n      },\n      'huxing|1': ['一室一厅', '两室一厅', '三室两厅'],\n      'area|40-240': 1,\n      'type|1': ['整租', '合租'],\n      'price|3000-100000': 2000\n    }]\n  }));\n}); //房屋详情\n\nrouter.get('/houseinfo', (req, res) => {\n  let id = req.query.id;\n  res.send(Mock.mock({\n    status: 200,\n    success: true,\n    id,\n    info: {\n      title: '@cword(5,10)',\n      'price|3000-10000': 1,\n      'huxing|1': ['一室一厅', '两室一厅', '三室两厅'],\n      'area|60-150.2': 1,\n      'zong|6-32': 1,\n      'cur|1-32': 1,\n      floor: function () {\n        if (this.zong < this.cur) {\n          return this.zong + '/' + this.cur;\n        } else {\n          return this.cur + '/' + this.zong;\n        }\n      },\n      'zhuangxiu|1': ['精装', '简装', '毛胚'],\n      'banner|4': [{\n        'id|+1': 1001,\n        'imgUrl|+1': ['http://iwenwiki.com/api/livable/banner/banner1.png', 'http://iwenwiki.com/api/livable/banner/banner2.png', 'http://iwenwiki.com/api/livable/banner/banner3.png', 'http://iwenwiki.com/api/livable/banner/banner1.png', 'http://iwenwiki.com/api/livable/banner/banner2.png', 'http://iwenwiki.com/api/livable/banner/banner3.png']\n      }]\n    }\n  }));\n}); //评价\n\nrouter.get('/comment', (req, res) => {\n  let id = req.query.id;\n  let page = req.query.page;\n  res.send(); // res.send(Mock.mock({\n  //     id,\n  //     nextPage: + page + 1,\n  //     status: 200,\n  //     success: true,\n  //     'list|5':[{\n  //         id : function(){\n  //             return v4();\n  //         },\n  //         //'tel':/1\\d{10}/,\n  //         'star|1-5':1,\n  //         content:'@cword(20,50)'\n  //     }]\n  // }))\n});\nmodule.exports = router;","map":{"version":3,"names":["express","require","Random","router","Router","Mock","v4","citys","get","req","res","send","data","mock","status","city","query","address","val","page","success","nextPage","id","title","floor","total","current","info","zong","cur","module","exports"],"sources":["/Users/zoujiaqi/goodp/src/server/router.js"],"sourcesContent":["const express = require('express')\nconst { Random } = require('Mockjs')\nconst router = express.Router()\nvar Mock = require('Mockjs')\nconst {v4} = require('uuid')\n\n\nconst citys = require('./data/hotcity.json')\n\n\n//测试接口\nrouter.get('/',(req,res)=>{\n    res.send('测试成功')\n})\n\n//测试\nrouter.get('/mock',(req,res)=>{\n    const data = Mock.mock({\n        \n        'list|10':[\n            {\n                'id|+1':1,\n                'title':'@cword(3,8)',\n                'huxing|1':['一室一厅','三室两厅','两室一厅']\n            }\n        ]\n        \n\n    })\n    res.send(data)\n})\n\n//获取首页轮播图\nrouter.get('/banner',(req,res)=>{\n    const data = Mock.mock({\n        status:200,\n        'banner|3':[{\n            'id|+1':1,\n            'imgUrl|+1':[\n                'http://iwenwiki.com/api/livable/banner/banner1.png',\n                'http://iwenwiki.com/api/livable/banner/banner2.png',\n                'http://iwenwiki.com/api/livable/banner/banner3.png'\n            ]\n        }]\n    })\n    res.send(data);\n})\n\n//热门房源接口\n//参数：{city: '北京'}\nrouter.get('/hothouse',(req,res)=>{\n    let city = req.query.city || '北京';\n    res.send(Mock.mock(\n        {\n            status:200,\n            'list|5':[\n                {\n                    'id|+1':1,\n                    address:city+'-@cword(3,8)',\n                    'huxing|1':['一室一厅','两室一厅','三室两厅','四室一厅'],\n                    'type|1':['整租','合租'],\n                    'price|2000-10000':1,\n                    'imgUrl|+1':[\"http://iwenwiki.com/api/livable/search/1.jpg\",\n                                 \"http://iwenwiki.com/api/livable/search/2.JPG\",\n                                 \"http://iwenwiki.com/api/livable/search/3.jpg\",\n                                 \"http://iwenwiki.com/api/livable/search/4.JPG\",\n                                 \"http://iwenwiki.com/api/livable/search/5.jpg\"\n                    ],\n                    'area|50-120.2':1\n                }\n            ]\n\n        }\n    ))\n})\n\n//请求热门城市\n\nrouter.get('/selectcity',(req,res)=>{\n    res.send({\n        status:200,\n        data:citys\n    })\n})\n\n//请求搜素列表\nrouter.get('/search',(req,res)=>{\n    let {city, val ,page} = req.query;\n    res.send(Mock.mock({\n        status:200,\n        success: true,\n        nextPage: page + 1,\n        'list|10':[{\n            'imgUrl|1':[\n                \"http://iwenwiki.com/api/livable/search/1.jpg\",\n                \"http://iwenwiki.com/api/livable/search/2.JPG\",\n                \"http://iwenwiki.com/api/livable/search/3.jpg\",\n                \"http://iwenwiki.com/api/livable/search/4.JPG\",\n                \"http://iwenwiki.com/api/livable/search/5.jpg\",\n                \"http://iwenwiki.com/api/livable/search/6.jpg\",\n                \"http://iwenwiki.com/api/livable/search/6.jpg\",\n                \"http://iwenwiki.com/api/livable/search/6.jpg\",\n                \"http://iwenwiki.com/api/livable/search/6.jpg\",\n                \"http://iwenwiki.com/api/livable/search/6.jpg\"\n             \n            ],\n            id:function(){\n                return v4();\n            },\n            title: city + val + '- @cword(5,8)',// 房源信息\n            'total|6-30': 1,//总楼层\n            'current|1-30':1,//当前楼层\n            floor: function () {\n                if (this.total >= this.current) {\n                    return `${this.current}/${this.total}`\n                } else {\n                    return `${this.total}/${this.current}`\n                }\n            },\n            'huxing|1': ['一室一厅','两室一厅','三室两厅'],\n            'area|40-240':1,\n            'type|1':['整租','合租'],\n            'price|3000-100000':2000\n        }]\n    }))\n})\n\n//房屋详情\nrouter.get('/houseinfo',(req,res)=>{\n    let id = req.query.id;\n    res.send(Mock.mock({\n        status:200,\n        success:true,\n        id,\n        info:{\n            title:'@cword(5,10)',\n            'price|3000-10000':1,\n            'huxing|1':['一室一厅','两室一厅','三室两厅'],\n            'area|60-150.2':1,\n            'zong|6-32':1,\n            'cur|1-32':1,\n            floor: function(){\n                if (this.zong < this.cur) {\n                    return this.zong + '/' +this.cur\n                } else {\n                    return this.cur + '/' + this.zong\n                }\n            },\n            'zhuangxiu|1':['精装','简装','毛胚'],\n            'banner|4':[{\n                'id|+1':1001,\n                'imgUrl|+1':[\n                    'http://iwenwiki.com/api/livable/banner/banner1.png',\n                    'http://iwenwiki.com/api/livable/banner/banner2.png',\n                    'http://iwenwiki.com/api/livable/banner/banner3.png',\n                    'http://iwenwiki.com/api/livable/banner/banner1.png',\n                    'http://iwenwiki.com/api/livable/banner/banner2.png',\n                    'http://iwenwiki.com/api/livable/banner/banner3.png'\n                ]\n            }]\n        }\n    }))\n})\n\n\n//评价\nrouter.get('/comment',(req,res)=>{\n    let id = req.query.id;\n    let page = req.query.page;\n    res.send()\n    // res.send(Mock.mock({\n    //     id,\n    //     nextPage: + page + 1,\n    //     status: 200,\n    //     success: true,\n    //     'list|5':[{\n    //         id : function(){\n    //             return v4();\n    //         },\n    //         //'tel':/1\\d{10}/,\n    //         'star|1-5':1,\n    //         content:'@cword(20,50)'\n    //     }]\n    // }))\n})\n\n\n\n\nmodule.exports=router"],"mappings":"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"},"metadata":{},"sourceType":"module"}